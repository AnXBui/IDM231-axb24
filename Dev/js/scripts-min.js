const infoButton=document.querySelector("#moreInfoButton"),infoConfirm=document.querySelector("#infoConfirm"),infoModule=document.querySelector("#moreInfo"),overlay=document.querySelector(".overlay");gsap.registerPlugin(DrawSVGPlugin,SplitText),gsap.defaults({ease:"power2"});const hideInfo=()=>{infoModule.classList.add("hide"),overlay.classList.add("hide")};infoButton.addEventListener("click",()=>{infoModule.classList.remove("hide"),overlay.classList.remove("hide")}),infoConfirm.addEventListener("click",hideInfo),overlay.addEventListener("click",hideInfo),hasClass=(t,e)=>t.classList.contains(e),addClass=(t,e)=>{t.classList.add(e)},rmvClass=(t,e)=>{t.classList.remove(e)};class GodItem{constructor(t,e,s,i){this.scene=s,this.text=i,this.key=t,this.index=e,this.timeline=gsap.timeline(),this.decoArray=[],this.svgDeco=this.scene.querySelectorAll(".deco"),this.svgDeco.forEach(t=>{t.querySelectorAll(".decoSVG").forEach(t=>{this.decoArray.push(t)})}),console.log(this.decoArray),this.figure=this.scene.querySelector(".godFigure"),this.halo=this.scene.querySelector(".halo"),this.title=this.scene.querySelector(".godTitle"),this.icon=this.text.querySelector(".godIcon"),this.iconSVG=this.icon.querySelectorAll(".iconSVG"),this.heading=this.text.querySelector("h2"),this.paragraph=this.text.querySelectorAll("p");let a=new SplitText(this.title.querySelector("h2"),{type:"chars"}),o=this.title.querySelector("h3");console.log(o),this.in=gsap.timeline({paused:!0}),this.in.fromTo(this.figure,.25,{alpha:0,yPercent:-10},{alpha:1,yPercent:0},"start").fromTo(this.svgDeco,.25,{alpha:0},{alpha:1,stagger:.25},"start").fromTo(this.decoArray,.35,{drawSVG:"0%"},{drawSVG:"100%",stagger:.15},"start+=0.1").fromTo(this.icon,.35,{alpha:0},{alpha:1},"start+=0.1").fromTo(this.halo,.35,{alpha:0,scale:0},{alpha:1,scale:1},"start+=0.15").fromTo(this.iconSVG,.25,{drawSVG:"0%"},{drawSVG:"100%",stagger:.05},"start+=0.15").fromTo(a.chars,.1,{yPercent:100},{yPercent:0,stagger:.02},"start+=0.15").fromTo(o,.15,{alpha:0},{alpha:.5},"start+=0.25").fromTo(this.heading,.25,{alpha:0,yPercent:10},{alpha:1,yPercent:0},"start+=0.2").fromTo(this.paragraph,.25,{alpha:0,yPercent:10},{alpha:1,yPercent:0,stagger:.15},"start+=0.25")}hide(){console.log("Hiding "+this.key),rmvClass(this.scene,"active"),rmvClass(this.text,"active")}show(){console.log("Showing "+this.key),addClass(this.scene,"active"),addClass(this.text,"active")}animateIn(){this.in.seek(0),this.in.play()}resetAnimate(){this.in.restart(),this.in.paused(!0)}}class GodGallery{constructor(t){this.gallery=document.querySelector(t),this.form=document.querySelector("#mainForm"),this.portals=document.querySelector("#godPortals"),this.background=document.querySelector("#background"),this.sceneWrapper=this.gallery.querySelector(".godSceneWrapper"),this.content=this.gallery.querySelector(".godContent"),this.textWrapper=this.gallery.querySelector(".godTextWrapper"),this.portalsArray=this.portals.querySelector(".godButtonList"),this.sceneArray=this.gallery.querySelectorAll("[data-god]"),this.textArray=this.gallery.querySelectorAll("[data-text]"),this.godArray=[],this.exitButton=this.gallery.querySelectorAll(".closeGod"),this.nextButton=this.gallery.querySelector(".nextGod"),this.prevButton=this.gallery.querySelector(".prevGod"),this.ui=[this.exitButton,this.nextButton,this.prevButton],this.activeGod=0,this.portalResuming=!1,this.oracle=!1,this.opened=!1,this.portalAnim=gsap.timeline(),this.mainAnim=gsap.timeline(),this.portalAnim.to(this.portalsArray,30,{rotate:360,repeat:-1,ease:"linear"}),this.enterAnimation=gsap.timeline({paused:!0}).fromTo(this.portalsArray,.25,{alpha:1,scale:1},{alpha:0,scale:.5},"start").fromTo(this.form,.25,{alpha:1},{alpha:0},"start").fromTo(this.gallery,.25,{autoAlpha:0},{autoAlpha:1,onComplete:()=>{this.hideForm(),this.hidePortals(),this.godArray[this.activeGod].animateIn()}}).fromTo(this.content,.25,{alpha:0},{alpha:1},"-=0.15").fromTo(this.textWrapper,.25,{alpha:0,yPercent:-10},{alpha:1,yPercent:0},"-=0.15").fromTo(this.sceneWrapper,.25,{alpha:0,yPercent:5},{alpha:1,yPercent:0},"-=0.25").fromTo(this.ui,.15,{autoAlpha:0},{autoAlpha:1,stagger:.1}),this.exitAnimation=gsap.timeline({paused:!0}).to(this.ui,.15,{alpha:0}).to(this.content,.25,{alpha:0}).to(this.textWrapper,.15,{alpha:0,yPercent:10},"-=0.25").to(this.sceneWrapper,.15,{alpha:0,yPercent:5,onComplete:()=>{this.godArray.forEach(t=>{t.resetAnimate()})}},"-=0.25").to(this.gallery,.25,{alpha:0},"-=0.15").to(this.portalsArray,.25,{alpha:1,scale:1},"-=0.15").to(this.form,.25,{alpha:1,scale:1,onComplete:()=>{this.hideGallery()}},"-=0.15"),this.sceneArray.forEach((t,e)=>{let s=t.getAttribute("data-god"),i=this.textArray[e],a=new GodItem(s,e,t,i);this.godArray.push(a)})}init(){document.querySelectorAll("[data-target]").forEach((t,e)=>{let s=t;t.addEventListener("click",t=>{let e=s.getAttribute("data-target");this.showGod(this.findGod(e)),this.open()})}),this.nextButton.addEventListener("click",()=>{this.nextGod()}),this.prevButton.addEventListener("click",()=>{this.prevGod()}),document.querySelector(".closeGod").addEventListener("click",()=>{this.close()}),document.querySelector("#seeAllButton").addEventListener("click",()=>{this.opened&&this.close(),this.oracle||this.portalResuming?(this.maximizePortals(),this.resumePortals(.5),this.oracle=!1):(this.minimizePortals(),this.pausePortals(.5),this.oracle=!0)})}hideForm(){hasClass(this.form,"inactive")||addClass(this.form,"inactive")}showForm(){hasClass(this.form,"inactive")&&rmvClass(this.form,"inactive")}minimizePortals(){if(!hasClass(this.portalsArray,"minimize")){addClass(this.portalsArray,"minimize");let t=gsap.timeline();t.to(this.portalsArray,.25,{"--buttonListSize":"85vmin"},"start"),t.to(this.form,.25,{alpha:0,scale:.75,onComplete:()=>{this.hideForm()}},"start")}}maximizePortals(){if(hasClass(this.portalsArray,"minimize")){this.showForm(),rmvClass(this.portalsArray,"minimize");let t=gsap.timeline();t.to(this.portalsArray,.25,{"--buttonListSize":"80vmax"},"start"),t.to(this.form,.25,{alpha:1,scale:1},"start")}}pausePortals(t){this.portalResuming||(console.log("Pausing portal"),gsap.to(this.portalAnim,t,{timeScale:.01,onComplete:()=>{this.setPausePortals()}}))}resumePortals(t){this.portalResuming=!0,this.portalAnim.play(),gsap.to(this.portalAnim,t,{timeScale:1,onComplete:()=>{this.portalResuming=!1}})}setPausePortals(){this.portalAnim.paused()||this.portalResuming||this.portalAnim.paused(!0)}minimizeBackground(){hasClass(this.background,"minimize")||addClass(this.background,"minimize")}maximizeBackground(){hasClass(this.background,"minimize")&&rmvClass(this.background,"minimize")}showGallery(){hasClass(this.gallery,"hide")&&rmvClass(this.gallery,"hide")}hideGallery(){hasClass(this.gallery,"hide")||addClass(this.gallery,"hide")}hidePortals(){hasClass(this.portals,"inactive")||addClass(this.portals,"inactive")}showPortals(){hasClass(this.portals,"inactive")&&rmvClass(this.portals,"inactive")}open(){this.opened||(this.opened=!0,this.showGallery(),this.enterAnimation.restart(),this.minimizeBackground(),this.oracle||this.pausePortals(0))}close(){console.log("close"),this.opened&&(this.showForm(),this.showPortals(),this.exitAnimation.restart(),this.maximizeBackground(),this.oracle&&(this.maximizePortals(),this.oracle=!this.oracle),this.resumePortals(.15),this.opened=!1)}findGod(t){let e=0;return"next"!=t||"prev"!=t?this.godArray.forEach((s,i)=>{s.key==t&&(e=i)}):e=t,e}showGod(t){let e=t;e!=this.activeGod&&e>=0&&e<=11?(this.godArray[this.activeGod].hide(),this.godArray[e].show(),this.activeGod=e):console.log("already active: "+e)}nextGod(){console.log("next");let t=this.activeGod;this.godArray[t].hide(),11==this.activeGod?this.activeGod=0:this.activeGod=this.activeGod+1,this.godArray[this.activeGod].show(),this.godArray[this.activeGod].animateIn()}prevGod(){console.log("previous");let t=this.activeGod;this.godArray[t].hide(),0==this.activeGod?this.activeGod=11:this.activeGod=this.activeGod-1,this.godArray[this.activeGod].show(),this.godArray[this.activeGod].animateIn()}}let masterGallery=new GodGallery("#godGallery");masterGallery.init();