const infoButton=document.querySelector("#moreInfoButton"),infoConfirm=document.querySelector("#infoConfirm"),infoModule=document.querySelector("#moreInfo"),overlay=document.querySelector(".overlay"),keyboard=document.querySelector(".keyboardControls");let infoActive=!1;gsap.registerPlugin(DrawSVGPlugin,SplitText),gsap.defaults({ease:"power2"});const toggleInfo=()=>{infoActive?(infoModule.classList.add("hide"),overlay.classList.add("hide"),keyboard.classList.add("hide"),infoActive=!1):(infoModule.classList.remove("hide"),overlay.classList.remove("hide"),keyboard.classList.remove("hide"),infoActive=!0)};infoButton.addEventListener("click",toggleInfo,!1),infoConfirm.addEventListener("click",toggleInfo,!1),overlay.addEventListener("click",toggleInfo,!1);const hasClass=(t,e)=>t.classList.contains(e),addClass=(t,e)=>{t.classList.add(e)},rmvClass=(t,e)=>{t.classList.remove(e)},zodiacCalc=(t,e)=>{let s;return 12==t&&e>=22||1==t&&e<=19?s=9:11==t&&e>=22||12==t&&e<=21?s=8:10==t&&e>=24||11==t&&e<=21?s=7:9==t&&e>=23||10==t&&e<=23?s=6:8==t&&e>=23||9==t&&e<=22?s=5:7==t&&e>=23||8==t&&e<=22?s=4:6==t&&e>=22||7==t&&e<=22?s=3:5==t&&e>=21||6==t&&e<=21?s=2:4==t&&e>=20||5==t&&e<=20?s=1:3==t&&e>=21||4==t&&e<=19?s=0:2==t&&e>=19||3==t&&e<=20?s=11:(1==t&&e>=20||2==t&&e<=18)&&(s=10),s};let speaker=document.querySelector("#speaker"),soundTgl={state:"on",obj:document.querySelector("#soundButton")};soundTgl.obj.addEventListener("click",()=>{"on"==soundTgl.state?(speaker.volume=0,soundTgl.state="off",hasClass(soundTgl.obj,"muted")||addClass(soundTgl.obj,"muted")):(speaker.volume=1,soundTgl.state="on",hasClass(soundTgl.obj,"muted")&&rmvClass(soundTgl.obj,"muted"))});class GodItem{constructor(t,e,s,a){this.scene=s,this.text=a,this.key=t,this.index=e,this.timeline=gsap.timeline(),this.decoArray=[],this.svgDeco=this.scene.querySelectorAll(".deco"),this.svgDeco.forEach(t=>{t.querySelectorAll(".decoSVG").forEach(t=>{this.decoArray.push(t)})}),this.figure=this.scene.querySelector(".godFigure"),this.halo=this.scene.querySelector(".halo"),this.title=this.scene.querySelector(".godTitle"),this.icon=this.text.querySelector(".godIcon"),this.iconSVG=this.icon.querySelectorAll(".iconSVG"),this.heading=this.text.querySelector("h2"),this.paragraph=this.text.querySelectorAll("p"),this.sound=`sound/${this.key}.mp3`;let i=new SplitText(this.title.querySelector("h2"),{type:"chars"}),o=this.title.querySelector("h3");this.in=gsap.timeline({paused:!0}),this.in.fromTo(this.figure,.4,{alpha:0,yPercent:-10},{alpha:1,yPercent:0},"start").fromTo(this.svgDeco,.25,{alpha:0},{alpha:1,stagger:.25},"start").fromTo(this.decoArray,.35,{drawSVG:"0%"},{drawSVG:"100%",stagger:.15},"start+=0.1").fromTo(this.icon,.35,{alpha:0},{alpha:1},"start+=0.1").fromTo(this.halo,.35,{alpha:0,scale:0},{alpha:1,scale:1},"start+=0.15").fromTo(this.iconSVG,.25,{drawSVG:"0%"},{drawSVG:"100%",stagger:.05},"start+=0.15").fromTo(i.chars,.1,{yPercent:100},{yPercent:0,stagger:.02},"start+=0.15").fromTo(o,.15,{alpha:0},{alpha:.5},"start+=0.25").fromTo(this.heading,.25,{alpha:0,yPercent:10},{alpha:1,yPercent:0},"start+=0.2").fromTo(this.paragraph,.25,{alpha:0,yPercent:10},{alpha:1,yPercent:0,stagger:.15},"start+=0.25")}hide(){rmvClass(this.scene,"active"),rmvClass(this.text,"active")}show(){addClass(this.scene,"active"),addClass(this.text,"active"),speaker.src=this.sound,speaker.play()}animateIn(){this.in.seek(0),this.in.play()}resetAnimate(){this.in.restart(),this.in.paused(!0)}}class GodGallery{constructor(t){this.gallery=document.querySelector(t),this.form=document.querySelector("#mainForm"),this.input=document.querySelector("#birthday"),this.submit=document.querySelector("#submit"),this.inputMsg=this.form.querySelector(".inputMessage"),this.portals=document.querySelector("#godPortals"),this.oracleMsg=document.querySelector(".oracleMode"),this.currentHover,this.godButtons=[],this.godName=document.querySelector("#godName"),this.background=document.querySelector("#background"),this.sceneWrapper=this.gallery.querySelector(".godSceneWrapper"),this.content=this.gallery.querySelector(".godContent"),this.textWrapper=this.gallery.querySelector(".godTextWrapper"),this.portalsArray=this.portals.querySelector(".godButtonList"),this.sceneArray=this.gallery.querySelectorAll("[data-god]"),this.textArray=this.gallery.querySelectorAll("[data-text]"),this.godArray=[],this.exitButton=this.gallery.querySelectorAll(".closeGod"),this.nextButton=this.gallery.querySelector(".nextGod"),this.prevButton=this.gallery.querySelector(".prevGod"),this.ui=[this.exitButton,this.nextButton,this.prevButton],this.activeGod=0,this.portalResuming=!1,this.oracle=!1,this.opened=!1,this.portalAnim=gsap.timeline(),this.mainAnim=gsap.timeline(),this.portalAnim.to(this.portalsArray,30,{rotate:360,repeat:-1,ease:"linear"}),this.enterAnimation=gsap.timeline({paused:!0}).fromTo(this.portalsArray,.25,{alpha:1,scale:1},{alpha:0,scale:.5},"start").fromTo(this.form,.25,{alpha:1},{alpha:0},"start").fromTo(this.gallery,.25,{autoAlpha:0},{autoAlpha:1,onComplete:()=>{this.hideForm(),this.hidePortals(),this.godArray[this.activeGod].animateIn()}}).fromTo(this.content,.25,{alpha:0},{alpha:1},"-=0.15").fromTo(this.textWrapper,.25,{alpha:0,yPercent:-10},{alpha:1,yPercent:0},"-=0.15").fromTo(this.sceneWrapper,.25,{alpha:0,yPercent:5},{alpha:1,yPercent:0},"-=0.25").fromTo(this.ui,.15,{autoAlpha:0},{autoAlpha:1,stagger:.1}),this.exitAnimation=gsap.timeline({paused:!0}).to(this.ui,.15,{alpha:0}).to(this.content,.25,{alpha:0}).to(this.textWrapper,.15,{alpha:0,yPercent:10},"-=0.25").to(this.sceneWrapper,.15,{alpha:0,yPercent:5,onComplete:()=>{this.godArray.forEach(t=>{t.resetAnimate()})}},"-=0.25").to(this.gallery,.25,{alpha:0},"-=0.15").to(this.portalsArray,.25,{alpha:1,scale:1},"-=0.15").to(this.form,.25,{alpha:1,scale:1,onComplete:()=>{this.hideGallery()}},"-=0.15"),this.sceneArray.forEach((t,e)=>{let s=t.getAttribute("data-god"),a=this.textArray[e],i=new GodItem(s,e,t,a);this.godArray.push(i)})}init(){document.querySelectorAll("[data-target]").forEach(t=>{let e=t;t.addEventListener("click",()=>{let t=e.getAttribute("data-target");this.showGod(this.findGod(t)),this.open()})}),this.nextButton.addEventListener("click",()=>{this.nextGod()}),this.prevButton.addEventListener("click",()=>{this.prevGod()}),document.querySelector(".closeGod").addEventListener("click",()=>{this.close()}),document.querySelector("#seeAllButton").addEventListener("click",()=>{this.opened&&this.close(),this.oracle||this.portalResuming?(this.maximizePortals(),this.resumePortals(.5),this.oracle=!1):(this.minimizePortals(),this.pausePortals(.5),this.oracle=!0)}),this.submit.addEventListener("click",()=>{if(this.input.value){let t=new Date(this.input.value),e=t.getUTCDate(),s=t.getUTCMonth()+1;this.showGod(zodiacCalc(s,e)),this.open()}}),this.hoverInit(),this.keyboardStart()}hideForm(){hasClass(this.form,"inactive")||addClass(this.form,"inactive")}showForm(){hasClass(this.form,"inactive")&&rmvClass(this.form,"inactive")}minimizePortals(){if(!hasClass(this.portalsArray,"minimize")){addClass(this.oracleMsg,"show"),addClass(this.portalsArray,"minimize");let t=gsap.timeline();t.to(this.portalsArray,.25,{"--buttonListSize":"85vmin"},"start"),t.to(this.form,.25,{alpha:0,scale:.75,onComplete:()=>{this.hideForm()}},"start")}}maximizePortals(){if(hasClass(this.portalsArray,"minimize")){let t="80vmax";window.matchMedia("(min-width: 992px)").matches&&(t="95vmin"),rmvClass(this.oracleMsg,"show"),this.showForm(),rmvClass(this.portalsArray,"minimize");let e=gsap.timeline();e.to(this.portalsArray,.25,{"--buttonListSize":t},"start"),e.to(this.form,.25,{alpha:1,scale:1},"start")}}hoverInit(){document.querySelectorAll("[data-target]").forEach(t=>{const e=t,s=e.getAttribute("data-target");e.addEventListener("mouseenter",()=>{let t=gsap.timeline();addClass(this.godName,"active"),t.to(this.godName,.125,{opacity:0,yPercent:-10,onComplete:()=>{this.godName.innerHTML=s}}),t.to(this.godName,.125,{opacity:1,yPercent:0})},!1),e.addEventListener("mouseleave",()=>{let t=gsap.timeline();rmvClass(this.godName,"active"),t.to(this.godName,.125,{opacity:0,yPercent:-10,onComplete:()=>{this.godName.innerHTML=null}}),t.to(this.godName,.125,{opacity:1,yPercent:0})},!1)})}pausePortals(t){this.portalResuming||gsap.to(this.portalAnim,t,{timeScale:.01,onComplete:()=>{this.setPausePortals()}})}resumePortals(t){this.portalResuming=!0,this.portalAnim.play(),gsap.to(this.portalAnim,t,{timeScale:1,onComplete:()=>{this.portalResuming=!1}})}setPausePortals(){this.portalAnim.paused()||this.portalResuming||this.portalAnim.paused(!0)}minimizeBackground(){hasClass(this.background,"minimize")||addClass(this.background,"minimize")}maximizeBackground(){hasClass(this.background,"minimize")&&rmvClass(this.background,"minimize")}showGallery(){hasClass(this.gallery,"hide")&&rmvClass(this.gallery,"hide")}hideGallery(){hasClass(this.gallery,"hide")||addClass(this.gallery,"hide")}hidePortals(){hasClass(this.portals,"inactive")||addClass(this.portals,"inactive")}showPortals(){hasClass(this.portals,"inactive")&&rmvClass(this.portals,"inactive")}open(){this.opened||(this.opened=!0,this.showGallery(),this.enterAnimation.restart(),this.minimizeBackground(),this.oracle||this.pausePortals(0),hasClass(this.inputMsg,"error")&&rmvClass(this.inputMsg,"error"),hasClass(this.oracleMsg,"show")&&rmvClass(this.oracleMsg,"show"))}close(){this.opened&&(this.showForm(),this.showPortals(),this.exitAnimation.restart(),this.maximizeBackground(),this.oracle&&(this.maximizePortals(),this.oracle=!this.oracle),this.resumePortals(.15),this.opened=!1,speaker.pause(),this.input.value=null)}findGod(t){let e=0;return"next"!=t||"prev"!=t?this.godArray.forEach((s,a)=>{s.key==t&&(e=a)}):e=t,e}showGod(t){let e=t;e!=this.activeGod&&e>=0&&e<=11?(this.godArray[this.activeGod].hide(),this.godArray[e].show(),this.activeGod=e):speaker.play()}nextGod(){let t=this.activeGod;this.godArray[t].hide(),11==this.activeGod?this.activeGod=0:this.activeGod=this.activeGod+1,this.godArray[this.activeGod].show(),this.godArray[this.activeGod].animateIn()}prevGod(){let t=this.activeGod;this.godArray[t].hide(),0==this.activeGod?this.activeGod=11:this.activeGod=this.activeGod-1,this.godArray[this.activeGod].show(),this.godArray[this.activeGod].animateIn()}keyboardStart(){this.keyboardEvent=this.keyboardEvent.bind(this),document.addEventListener("keydown",this.keyboardEvent,!1)}keyboardEvent(t){switch(t.keyCode){case 39:this.opened&&this.nextGod();break;case 37:this.opened&&this.prevGod();break;case 27:this.oracle&&(this.maximizePortals(),this.oracle=!1),infoActive&&toggleInfo(),this.close();break;case 69:this.oracle&&this.portalResuming&&(this.maximizePortals(),this.oracle=!1),infoActive&&toggleInfo(),this.open();break;case 73:toggleInfo();break;case 79:this.opened&&this.close(),this.oracle||this.portalResuming?(this.maximizePortals(),this.resumePortals(.5),this.oracle=!1):(this.minimizePortals(),this.pausePortals(.5),this.oracle=!0)}}}const body=document.querySelector("body"),portals=document.querySelector(".godButtonList"),mountain=document.querySelector(".backgroundMountain"),ui=document.querySelectorAll(".mainUi"),form=document.querySelector(".form");gsap.set(body,{alpha:0}),gsap.set(body,{visibility:"hidden"}),window.onload=()=>{gsap.set(body,{visibility:"visible"});const t=gsap.timeline();t.fromTo(body,1,{alpha:0},{alpha:1},"start"),t.fromTo(portals,1.5,{scale:.5,alpha:0},{scale:1,alpha:1},"start"),t.fromTo(mountain,1.2,{yPercent:30,scaleY:.85,alpha:0},{yPercent:0,scaleY:1,alpha:1},"start"),t.fromTo(form,1.75,{yPercent:-15,alpha:0},{yPercent:0,alpha:1},"start"),t.fromTo(ui,1.5,{xPercent:30,alpha:0},{xPercent:0,alpha:1,stagger:.5},"start");new GodGallery("#godGallery").init()};